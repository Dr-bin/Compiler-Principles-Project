# 简单表达式语言的语法规则
# 格式: NonTerminal -> production1 | production2

# @REQUIRE_EXPLICIT_DECLARATION: false
# 语言特性：Simple语言允许隐式声明，变量在赋值时自动声明

# 程序：由语句组成
Program -> StmtList

# 语句列表：一个或多个语句
# 注意：产生式顺序很重要！递归产生式应该放在后面以便正确回溯
StmtList -> Stmt StmtList | Stmt

# 语句：赋值或打印
Stmt -> 'ID' 'ASSIGN' Expr 'SEMI' | 'PRINT' 'LPAREN' Expr 'RPAREN' 'SEMI'

# 表达式：改为左递归风格（但用非递归方式实现）
# 使用左结合的产生式顺序来避免右递归无限循环
Expr -> Term AddOp | Term

AddOp -> 'PLUS' Term AddOp | 'MINUS' Term AddOp | 'PLUS' Term | 'MINUS' Term

Term -> Factor MulOp | Factor

MulOp -> 'MUL' Factor MulOp | 'DIV' Factor MulOp | 'MUL' Factor | 'DIV' Factor

# 因子：数字、标识符或括号表达式
Factor -> 'NUM' | 'ID' | 'LPAREN' Expr 'RPAREN'
