# PL/0子集语言的语法规则 (LL(1) 优化版)

# 程序结构：程序由声明列表和语句列表组成
Program -> DeclList StmtList

# 声明列表：消除左公因子，使用尾部处理空产生式
DeclList -> VarDecl DeclListTail | 
DeclListTail -> VarDecl DeclListTail | 

# 变量声明：以VAR关键字开头，后跟标识符列表和分号
VarDecl -> 'VAR' IDList 'SEMI'

# 标识符列表：消除左公因子
IDList -> 'ID' IDListTail
IDListTail -> 'COMMA' 'ID' IDListTail | 

# 语句列表：消除左公因子
StmtList -> Stmt StmtListTail
StmtListTail -> Stmt StmtListTail | 

# 语句类型：支持赋值语句、if语句、while语句、read语句、write语句和块
Stmt -> AssignStmt | IfStmt | WhileStmt | ReadStmt | WriteStmt | Block

# 赋值语句：标识符 = 表达式;
AssignStmt -> 'ID' 'ASSIGN' Expr 'SEMI'

# If语句：简化版本，不支持else（避免悬空else的LL(1)冲突）
# 如需else，请使用Block包围: if (cond) { ... } else { ... } 形式
IfStmt -> 'IF' 'LPAREN' BoolExpr 'RPAREN' Stmt

# While语句：while (条件) 语句
WhileStmt -> 'WHILE' 'LPAREN' BoolExpr 'RPAREN' Stmt

# Read语句：从输入读取值到变量
ReadStmt -> 'READ' 'ID' 'SEMI'

# Write语句：输出表达式的值
WriteStmt -> 'WRITE' 'LPAREN' Expr 'RPAREN' 'SEMI'

# 块：由大括号包围的语句列表
Block -> 'LBRACE' StmtList 'RBRACE'

# 布尔表达式：表达式 关系操作符 表达式
BoolExpr -> Expr RelOp Expr

# 关系操作符：小于、小于等于、大于、大于等于、等于、不等于
RelOp -> 'LT' | 'LE' | 'GT' | 'GE' | 'EQ' | 'NE'

# 表达式：消除左公因子
Expr -> Term ExprTail
ExprTail -> 'PLUS' Term ExprTail | 'MINUS' Term ExprTail | 

# 项：消除左公因子
Term -> Factor TermTail
TermTail -> 'MUL' Factor TermTail | 'DIV' Factor TermTail | 

# 因子：可以是数字、标识符或括号包围的表达式
Factor -> 'NUM' | 'ID' | 'LPAREN' Expr 'RPAREN'
